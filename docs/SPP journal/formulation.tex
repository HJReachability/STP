% !TEX root = SPP_journal.tex
\section{Problem Formulation \label{sec:formulation}}
Consider $\N$ vehicles which participate in the SPP process and denote these vehicles as \textit{SPP vehicles} $\veh{i}, i = 1, \ldots, \N$. We assume their dynamics are given by

\begin{equation}
\label{eq:dyn}
\begin{aligned}
\dot\state_i &= \fdyn_i(\state_i, \ctrl_i, \dstb_i), t \in [\edt, \sta] \\
\state_i(\edt) &= \state^0_i \\
\ctrl_i &\in \cset_i \\
\dstb_i &\in \dset_i \\
i &= 1 \ldots, \N
\end{aligned}
\end{equation}

\noindent where $\state_i \in \R^{n_i}$ represents the state of vehicle $\veh{i}$, $\ctrl_i \in \cset_i$ the control of $\veh{i}$, and $\dstb_i \in \dset_i$ the disturbance experienced by $\veh{i}$. For convenience, we partition the state $\state_i$ into the position component $\pos_i \in \R^{n_\pos}$ and the non-position component $\npos_i \in \R^{n_i - n_\pos}$: $\state_i = (\pos_i, \npos_i)$.

Each vehicle $\veh{i}$ has initial state $\state^0_i$, and departs after $\edt_i$, its earliest departure time. $\veh{i}$ aims to reach its target $\targetset_i$ by some scheduled time of arrival $\sta_i$. The target in general represents some set of desirable states, for example the destination of $\veh{i}$. For most of the paper we will make the assumption that $\edt_i$ is early enough for $\veh{i}$ to feasibly get to $\targetset_i$ on time; this can be done by letting $\edt_i \rightarrow -\infty$. The assumption on $\edt_i$ is merely for convenience: in situations where $\edt_i$ is $-\infty$, we may find that it is infeasible for $\veh{i}$ to get to $\targetset_i$ at or before $\sta_i$. Whenever unsure, we may need to first determine a feasible $\sta_i$ as described in Section \ref{} \textcolor{red}{(replaning section)}. 

On its way to $\targetset_i$, $\veh{i}$ must avoid a set of static obstacles $\sosetp \subset \R^{n_\pos}$. The interpretation of $\sosetp$ could be a tall building, a region around an airport, or any set of positions that are forbidden for each SPP vehicle. In terms of the state space $\state_i = (\pos_i, \npos_i)$ of vehicle $\veh{i}$, the forbidden set induced by the static obstacles $\sosetp$ is given by

\begin{equation}
\begin{aligned}
\soset_i = \{\state_i \mid p_i \in \sosetp\}
\end{aligned}
\end{equation}

For convenience, we will sometimes refer to $\soset_i$ as the set of static obstacles when it is not necessary to distinguish between $\sosetp$ and $\soset_i$.

In addition to the static obstacles, each vehicle $\veh{i}$ must also avoid the danger zones with respect to each of the other vehicle $\veh{j}, j\neq i$. The danger zones in general can represent any joint configuration between $\veh{i}$ and $\veh{j}$ that is considered to be unsafe. In this paper, we define the danger zone of $\veh{i}$ with respect to $\veh{j}$ to be

\begin{equation}
\dz_{ij} = \{(\state_i, \state_j): \dist(\pos_i, \pos_j) \le \rc\}
\end{equation}

\noindent whose interpretation is that $\veh{i}$ and $\veh{j}$ are considered to be in an unsafe configuration when they are within a distance of $\rc$ of each other.

Given the set of SPP vehicles, their targets $\targetset_i$, the static obstacles $\sosetp$, and the vehicles' danger zones with respect to each other $\dz_{ij}$, we would like to for each vehicle $\veh{i}$ synthesize a controller that guarantees $\veh{i}$ reaches its target $\targetset_i$ at or before the scheduled time of arrival $\sta$, while avoiding the static obstacles $\sosetp$ as well as the danger zones with respect to all other vehicles $\dz{ij}, j\neq i$. In addition, we would like to obtain a bound on the latest departure time $\ldt$ such that $\veh{i}$ can still arrive at $\targetset_i$ on time.

In general, the above path planning problem must be solved in the joint space of all $\N$ SPP vehicles. However, due to the high joint problem dimensionality, a direct dynamic programming-based solution is intractable. Therefore, we propose to assign a priority to each vehicle, and perform SPP given the assigned priorities. Without loss of generality, $\veh{i}$ has a higher priority than $\veh{j}, j>i$. Under the SPP scheme, higher priority vehicles can ignore the presence of lower priority vehicles, and perform path planning without taking into account the lower priority vehicles' danger zones. A lower priority vehicle $\veh{i}$, on the other hand, must ensure that it does not enter the danger zones of the higher priority vehicles $\veh{j}, j<i$; each higher priority vehicle $\veh{j}$ induces a set of time-varying obstacles $\ioset_i^j(t)$.

It is straight-forward to see that if each vehicle $\veh{i}$ is able to plan a trajectory that takes it to $\targetset_i$ while avoiding the static obstacles $\sosetp$ and the danger zones of \textit{higher priority vehicles} $\veh{j}, j<i$, then the set of SPP vehicles $\veh{i}, i=1,\ldots,\N$ would all be able to reach their targets safely. With the SPP scheme, the additional structure provided by the vehicle priorities allows us to reduce the complexity joint path planning problem. As we will see, under the SPP scheme, path planning can be done sequentially in descending order of vehicle priority in the state space of only a single vehicle. Thus, SPP provides a solution whose complexity that scales linearly with the number of vehicles, as opposed to exponentially with a direct application of dynamic programming approaches.

In the following sections, we will explore SPP under different assumptions. We begin with the basic solution in which disturbances are ignored and perfect information of vehicles' positions is assumed. Next, we show how the basic SPP approach can be robustified by taking into account the presence disturbances as well as an imperfect knowledge of other vehicles' states. Finally, we further robustify the SPP approach by considering how the set of SPP vehicles may respond to the presence of an intruder vehicle. \textcolor{red}{This paragraph might be better in the introduction}